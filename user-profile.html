<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil User - ndiidepzXmusic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Tambahkan styles dari file sebelumnya dan tambahkan yang berikut: */
        
        .profile-section {
            padding: 40px 0;
        }
        
        .profile-header {
            background: linear-gradient(135deg, var(--secondary), var(--dark));
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-info h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }
        
        .profile-info .bio {
            color: var(--gray);
            margin-bottom: 20px;
            font-size: 16px;
        }
        
        .profile-stats {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .profile-stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--gray);
        }
        
        .profile-actions {
            display: flex;
            gap: 15px;
        }
        
        .view-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
            padding: 20px;
            background-color: var(--secondary);
            border-radius: 10px;
        }
        
        .view-stat {
            text-align: center;
            padding: 15px;
        }
        
        .view-number {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .view-label {
            font-size: 12px;
            color: var(--gray);
        }
        
        .playlists-section {
            margin-top: 40px;
        }
        
        .section-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .playlists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .playlist-card {
            background-color: var(--secondary);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .playlist-card:hover {
            transform: translateY(-5px);
            background-color: #282828;
        }
        
        .playlist-card h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .playlist-card p {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .playlist-stats {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 12px;
        }
        
        .no-playlists {
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }
        
        .no-playlists i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--dark-gray);
        }
    </style>
</head>
<body>
    <!-- Header (sama seperti sebelumnya) -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-music"></i>
                    <h1>ndiidepzX<span>music</span></h1>
                </div>
                
                
                
                <div class="user-actions">
                    <div class="user-info">
                        <div class="user-avatar" id="userAvatar">U</div>
                        <span id="username">User</span>
                    </div>
                    <button class="btn btn-outline" onclick="logout()">Keluar</button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Profile Section --<!-- Contoh navigasi yang sama di semua halaman -->
<div class="nav-links">
    <a href="docs.html">Beranda</a>
    <a href="explore.html">Jelajahi</a>
    <a href="search-users.html">Cari User</a>
    <a href="search-artists.html">Cari Artist</a>
    <a href="playlists.html">Playlist</a>
    <a href="stats.html">Statistik</a>
    <a href="request.html">Request</a>
    <a href="help.html">Bantuan</a>
    <a href="profile.html">Profil</a>
</div>>
    <section class="profile-section">
        <div class="container">
            <div class="profile-header" id="profileHeader">
                <!-- Profile data will be loaded here -->
            </div>
            
            <div class="playlists-section">
                <h2 class="section-title">Playlist Publik</h2>
                <div class="playlists-grid" id="playlistsContainer">
                    <!-- Playlists will be loaded here -->
                </div>
            </div>
        </div>
    </section>
    
    <script src="music-data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('ndiidepzXmusic_loggedIn');
            
            if (!isLoggedIn) {
                window.location.href = 'login.html';
                return;
            }
            
            // Load current user data
            const userData = getCurrentUserData();
            if (userData) {
                document.getElementById('username').textContent = userData.profile.username;
                document.getElementById('userAvatar').textContent = userData.profile.username.charAt(0).toUpperCase();
            }
            
            // Get username from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const username = urlParams.get('username');
            
            if (username) {
                loadUserProfile(username);
            } else {
                window.location.href = 'search-users.html';
            }
        });
        
        function loadUserProfile(username) {
            const profile = getUserProfileByUsername(username);
            
            if (!profile) {
                document.getElementById('profileHeader').innerHTML = `
                    <div style="text-align: center; width: 100%; padding: 40px;">
                        <i class="fas fa-user-slash" style="font-size: 50px; color: var(--gray); margin-bottom: 15px;"></i>
                        <h2>User tidak ditemukan</h2>
                        <p>User dengan username "${username}" tidak ditemukan atau profilnya tidak publik.</p>
                        <button class="btn btn-primary" onclick="window.location.href='search-users.html'">
                            Kembali ke Pencarian
                        </button>
                    </div>
                `;
                return;
            }
            
            // Update profile header
            document.getElementById('profileHeader').innerHTML = `
                <div class="profile-avatar">
                    ${profile.username.charAt(0).toUpperCase()}
                </div>
                <div class="profile-info">
                    <h1>${profile.username}</h1>
                    <p class="bio">${profile.bio || 'User belum menulis bio'}</p>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="stat-number">${profile.followers}</div>
                            <div class="stat-label">Pengikut</div>
                        </div>
                        <div class="profile-stat">
                            <div class="stat-number">${profile.following}</div>
                            <div class="stat-label">Mengikuti</div>
                        </div>
                        <div class="profile-stat">
                            <div class="stat-number">${profile.totalPlays}</div>
                            <div class="stat-label">Total Diputar</div>
                        </div>
                    </div>
                    
                    <div class="profile-actions">
                        <button class="btn ${profile.isFollowed ? 'btn-primary' : 'btn-outline'}" id="followBtn" onclick="toggleFollow('${profile.username}')">
                            ${profile.isFollowed ? '<i class="fas fa-check"></i> Following' : '<i class="fas fa-plus"></i> Follow'}
                        </button>
                    </div>
                    
                    <div class="view-stats">
                        <div class="view-stat">
                            <div class="view-number">${profile.profileViews.today}</div>
                            <div class="view-label">Tayangan Hari Ini</div>
                        </div>
                        <div class="view-stat">
                            <div class="view-number">${profile.profileViews.thisMonth}</div>
                            <div class="view-label">Tayangan Bulan Ini</div>
                        </div>
                        <div class="view-stat">
                            <div class="view-number">${profile.profileViews.total}</div>
                            <div class="view-label">Total Tayangan</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Load playlists
            loadUserPlaylists(profile.publicPlaylists);
        }
        
        function loadUserPlaylists(playlists) {
            const container = document.getElementById('playlistsContainer');
            
            if (!playlists || playlists.length === 0) {
                container.innerHTML = `
                    <div class="no-playlists" style="grid-column: 1/-1;">
                        <i class="fas fa-list"></i>
                        <h3>Tidak ada playlist publik</h3>
                        <p>User ini belum membuat playlist yang dapat dilihat publik</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            playlists.forEach(playlist => {
                const playlistCard = document.createElement('div');
                playlistCard.className = 'playlist-card';
                playlistCard.innerHTML = `
                    <h3>${playlist.name}</h3>
                    <p>${playlist.description || 'Tidak ada deskripsi'}</p>
                    <div class="playlist-stats">
                        <span>${playlist.songCount} lagu</span>
                        <span>Dibuat ${new Date(playlist.created).toLocaleDateString('id-ID')}</span>
                    </div>
                `;
                
                playlistCard.addEventListener('click', () => {
                    // In a real app, this would open the playlist
                    alert(`Membuka playlist: ${playlist.name}`);
                });
                
                container.appendChild(playlistCard);
            });
        }
        
        function toggleFollow(username) {
            const isNowFollowing = toggleFollowUser(username);
            const followBtn = document.getElementById('followBtn');
            
            if (isNowFollowing) {
                followBtn.innerHTML = '<i class="fas fa-check"></i> Following';
                followBtn.className = 'btn btn-primary';
            } else {
                followBtn.innerHTML = '<i class="fas fa-plus"></i> Follow';
                followBtn.className = 'btn btn-outline';
            }
            
            // Refresh profile to update follower count
            setTimeout(() => {
                loadUserProfile(username);
            }, 500);
        }
        
        function logout() {
            localStorage.removeItem('ndiidepzXmusic_loggedIn');
            localStorage.removeItem('ndiidepzXmusic_currentUser');
            localStorage.removeItem('ndiidepzXmusic_username');
            localStorage.removeItem('ndiidepzXmusic_userEmail');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
